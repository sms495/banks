# Проект "Банковские операции клиента"

## Описание:

Проект "Банковские операции клиента" - это приложение на Python для банковских операций клиента.

## Приложение:

Данное приложение находится в стадии разработки. Файл README будет пополняться по мере написания программы.

## Тестирование

### Модуль masks

#### Функция get_mask_card_number - функция маскировки номера банковской карты.

Функция get_mask_card_number принимает на вход номер карты и возвращает ее маску. Номер карты замаскирован и отображается в формате

XXXX XX** **** XXXX, где X — это цифра номера. То есть видны первые 6 цифр и последние 4 цифры, остальные символы отображаются звездочками, номер разбит по блокам по 4 цифры, разделенным пробелами. 

Пример работы функции:

    7000792289606361     # входной аргумент
    7000 79** **** 6361  # выход функции

#### Функция get_mask_account - функция маскировки номера банковского счета.

Функция get_mask_account принимает на вход номер счета и возвращает его маску. Номер счета замаскирован и отображается в формате **XXXX, где X — это цифра номера. То есть видны только последние 4 цифры номера, а перед ними — две звездочки. 

Пример работы функции:

    73654108430135874305  # входной аргумент
    **4305  # выход функции

### Модуль widget

#### Функция mask_account_card - функция, которая умеет обрабатывать информацию как о картах, так и о счетах.

Функция mask_account_card gринимать один аргумент — строку, содержащую тип и номер карты или счета.

Примеры работы функции:

    # Пример для карты
    Visa Platinum 7000792289606361  # входной аргумент
    Visa Platinum 7000 79** **** 6361  # выход функции

    # Пример для счета
    Счет 73654108430135874305  # входной аргумент
    Счет **4305  # выход функции

#### Функция get_date, которая принимает на вход строку с датой " и возвращает строку с датой в формате "ДД.ММ.ГГГГ"

Примеры работы функции:

    "2024-03-11T02:26:18.671407" #входной аргумент
    "11.03.2024" # выход функции

### Модуль processing

#### Функция filter_by_state

Функция filter_by_state - это функция, которая принимает список словарей и опционально значение для ключа state (по умолчанию 'EXECUTED'). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению.

Примеры работы функции:

    # Пример входных данных для проверки функции
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

    # Выход функции со статусом по умолчанию 'EXECUTED'
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

    # Выход функции, если вторым аргументов передано 'CANCELED'
    [   {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

#### Функция sort_by_date

Функция sort_by_date - это функция, которая принимает список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание). Функция должна возвращать новый список, отсортированный по дате (date).

Примеры работы функции:

    # Пример входных данных для проверки функции
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

    # Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

#### Функция filter_by_currency

Функция фильтрует транзации по заданной валюте.

#### Функция transaction_descriptions

Функция возращает описание транзации.

Для функций filter_by_currency и transaction_descriptions использовались данные:

    #{"id": 939719570, "state": "EXECUTED", "date": "2018-06-30T02:08:58.425572", "operationAmount": {"amount": "9824.07", "currency": {"name": "USD", "code": "USD"}}, "description": "Перевод организации", "from": "Счет 75106830613657916952", "to": "Счет 11776614605963066702"},
     {"id": 142264268, "state": "EXECUTED", "date": "2019-04-04T23:20:05.206878", "operationAmount": {"amount": "79114.93", "currency": {"name": "USD", "code": "USD"}}, "description": "Перевод со счета на счет", "from": "Счет 19708645243227258542", "to": "Счет 75651667383060284188"},
     {"id": 873106923, "state": "EXECUTED", "date": "2019-03-23T01:09:46.296404", "operationAmount": {"amount": "43318.34", "currency": {"name": "руб.", "code": "RUB"}}, "description": "Перевод со счета на счет", "from": "Счет 44812258784861134719", "to": "Счет 74489636417521191160"},
     {"id": 895315941, "state": "EXECUTED", "date": "2018-08-19T04:27:37.904916", "operationAmount": {"amount": "56883.54", "currency": {"name": "USD", "code": "USD"}}, "description": "Перевод с карты на карту", "from": "Visa Classic 6831982476737658", "to": "Visa Platinum 8990922113665229"},
     {"id": 594226727, "state": "CANCELED", "date": "2018-09-12T21:27:25.241689", "operationAmount": {"amount": "67314.70", "currency": {"name": "руб.", "code": "RUB"}}, "description": "Перевод организации", "from": "Visa Platinum 1246377376343588", "to": "Счет 14211924144426031657"}

#### Функция card_number_generator

Функция, которая генерирует и выдает номера банковских карт в формате ХХХХ ХХХХ ХХХХ ХХХХ.

#### Библиотеки json, requests и datetime

Функция, которая принимает на вход путь до JSON-файла и возвращает список словарей с данными о финансовых транзакциях. Если файл пустой, содержит не список или не найден, функция возвращает пустой список. Функцию поместите в модуль utils. 
При работе используем файл с данными о финансовых транзациях operations.json.

Функция, которая принимает на вход транзакцию и возвращает сумму транзакции (amount) в рублях, тип данных — float. Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения текущего курса валют и конвертации суммы операции в рубли.

Создан файл .env, в котором хранятся конфиденциальные данные. Какие переменные окружения необходимы для работы проекта и как они должны быть организованы, написанов в шаблоне example.env-файле.

#### 12.2 Библиотека logging

Созданы логеры для модулей: masks, utils. Логи записываются в папку logs в корне проекта. 

#### 13.1 Библиотеки csv и pandas

Созданы функции для считывания финансовых операций из CSV и xslx файлов. 

#### 13.2. Библиотеки re, collections, random

Создана функция , которая будет принимать список словарей с данными о банковских операциях и строку поиска, а возвращать список словарей, у которых в описании есть данная строка. При реализации этой функции используйте библиотеку re для работы с регулярными выражениями.

Также создана функция, которая будет принимать список словарей с данными о банковских операциях и список категорий операций, а возвращать словарь, в котором ключи — это названия категорий, а значения — это количество операций в каждой категории. 

Создана функция main в модуле main, которая отвечает за основную логику проекта и связывает функциональности между собой.

Ожидаемое поведение программы должно быть следующим:

    Программа приветствует пользователя:

    Программа: Привет! Добро пожаловать в программу работы 
    с банковскими транзакциями. 
    Выберите необходимый пункт меню:
    1. Получить информацию о транзакциях из JSON-файла
    2. Получить информацию о транзакциях из CSV-файла
    3. Получить информацию о транзакциях из XLSX-файла

    Пользователь: 1

    Программа: Для обработки выбран JSON-файл.

    После пользователь выбирает статус интересующих его операций.

        Не забудьте, что для пользователя

        executed

        ,

        Executed

        и

        EXECUTED

        — это одно и то же, а для программы — разное. Используйте приведение к единому регистру.

    Программа: Введите статус, по которому необходимо выполнить фильтрацию. 
    Доступные для фильтровки статусы: EXECUTED, CANCELED, PENDING

    Пользователь: EXECUTED

    Программа: Операции отфильтрованы по статусу "EXECUTED"

    В случае, если пользователь ввел неверный статус, программа не должна падать в ошибку, а должна возвращать пользователя к вводу корректного статуса:

    Пользователь: test

    Программа: Статус операции "test" недоступен.

    Программа: Введите статус, по которому необходимо выполнить фильтрацию. 
    Доступные для фильтровки статусы: EXECUTED, CANCELED, PENDING

    После фильтрации программа выводит следующие вопросы для уточнения выборки операций, необходимых пользователю, и выводит в консоль операции, соответствующие выборке пользователя:

    Программа: Отсортировать операции по дате? Да/Нет

    Пользователь: да

    Программа: Отсортировать по возрастанию или по убыванию? 

    Пользователь: по возрастанию/по убыванию

    Программа: Выводить только рублевые транзакции? Да/Нет

    Пользователь: да

    Программа: Отфильтровать список транзакций по определенному слову 
    в описании? Да/Нет

    Пользователь: да/нет

    Программа: Распечатываю итоговый список транзакций...

    Программа: 
    Всего банковских операций в выборке: 4

    08.12.2019 Открытие вклада 
    Счет **4321
    Сумма: 40542 руб. 

    12.11.2019 Перевод с карты на карту
    MasterCard 7771 27** **** 3727 -> Visa Platinum 1293 38** **** 9203
    Сумма: 130 USD

    18.07.2018 Перевод организации 
    Visa Platinum 7492 65** **** 7202 -> Счет **0034
    Сумма: 8390 руб.

    03.06.2018 Перевод со счета на счет
    Счет **2935 -> Счет **4321
    Сумма: 8200 EUR

    Если выборка оказалась пустой, программа выводит сообщение:

    Программа: Не найдено ни одной транзакции, подходящей под ваши
    условия фильтрации

